# CI/CD Overview

## Для кого цей матеріал і навіщо він тестувальнику

Цей розділ пояснює **безперервну інтеграцію (CI)** та **безперервну доставку (CD)** — практики, які щодня використовують команди розробки та тестування. Як тестувальник ви часто будете запускати автотести в CI/CD, аналізувати результати пайплайнів і перевіряти, що новий код не ламає вже працюючий функціонал. Розуміння CI/CD допомагає зрозуміти, *де* і *коли* виконуються тести і як вони вписуються в процес випуску продукту.

---

## Ключові терміни (спочатку визначення)

Перш ніж говорити про CI/CD, варто зафіксувати кілька понять:

- **Репозиторій (repository, «репо»)** — місце, де зберігається код проекту разом з історією змін (наприклад, Git). Усі учасники команди беруть код звідти і відправляють туди свої зміни.
- **Гілка (branch)** — окрема лінія змін у репозиторії. Розробники часто роблять нову фічу в окремій гілці, щоб не зламати основний код.
- **Злиття, мердж (merge)** — об'єднання змін з однієї гілки в іншу (наприклад, з гілки фічі в основну гілку).
- **Білд (build)** — процес збирання програми з вихідного коду (компіляція, упаковка залежностей тощо). Результат — готовий до запуску артефакт.
- **Деплой (deploy)** — розміщення зібраної програми на сервері або в середовищі, де її можуть використовувати.
- **DevOps** — підхід, що поєднує розробку (development) та експлуатацію (operations): автоматизація збірки, тестування, доставки та підтримки програмного забезпечення.
- **Пайплайн (pipeline)** — послідовність автоматичних кроків (наприклад: взяти код → зібрати → запустити тести → задеплоїти), які виконуються один за одним.

Усі ці терміни використовуються далі в контексті CI/CD.

---

## Що таке CI/CD і навіщо це потрібно

**Безперервна інтеграція (CI)** і **безперервна доставка (CD)** — це набір практик у рамках DevOps, які дають змогу команді **частіше і безпечніше** вносити зміни в код і випускати продукт.

**Чому це важливо:** без автоматизації кожна зміна вимагає ручної збірки, ручного запуску тестів і ручного деплою. Це повільно, схильно до помилок і не масштабується. CI/CD переносить ці кроки в автоматичний пайплайн: код після злиття автоматично збирається, тестується і (залежно від налаштувань) готується до деплою або автоматично деплоїться.

**Підсумок:** CI відповідає за те, щоб зміни коду регулярно зливались у спільне місце (репозиторій) і проходили автоматичні збірку та тести. CD відповідає за те, щоб перевірений код можна було швидко і безпечно доставити в потрібне середовище (тестове, стейджинг, прод).

---

## Безперервна інтеграція (Continuous Integration)

### Навіщо вона потрібна

У сучасній розробці кілька людей одночасно змінюють код у різних гілках. Якщо зливати все рідко і великими об'ємами, зміни часто **конфліктують** між собою (різні правки одних і тих самих рядків коду). Вирішення таких конфліктів вручну займає багато часу — це іноді називають «пеклом мерджу» (merge hell).

**Ідея CI:** зливати зміни в спільну гілку **часто** (наприклад, кілька разів на день) невеликими порціями. Після кожного такого злиття автоматично запускаються збірка та набір тестів. Таким чином помилки виявляються швидко, ще до того, як накопичиться великий об'єм змін.

### Як це працює (коротко)

1. Розробник вносить зміни у свою гілку і відправляє їх у репозиторій (коміт / пуш).
2. CI-система реагує на новий код: запускає збірку (build).
3. Після успішної збірки запускаються автоматизовані тести.
4. Результати (успіх/невдача, логи) повертаються команді — це і є **швидкий зворотний зв'язок**.

Як тестувальник ви можете дивитися ці результати в інтерфейсі CI (наприклад, Jenkins, GitLab CI, GitHub Actions) і розбирати падаючі тести.

### Переваги безперервної інтеграції

- **Швидший фідбек:** розробник і тестувальник майже одразу бачать, чи зламав останній коміт збірку або тести.
- **Менше «пекла мерджу»:** невеликі злиття простіше вирішувати, ніж одне велике в кінці спринту.
- **Вищі якість і передбачуваність релізів:** помилки виявляються рано і можуть бути виправлені до релізу.

### Протилежний підхід (без CI)

Якщо всі пишуть тільки в одну гілку (наприклад, master) і деплой робиться лише з неї, збірка і тестування часто відкладаються до моменту «великого злиття». Тоді збірка займає довше, тестів стає багато, а виявлені баги важче прив'язати до конкретних змін. CI саме це і змінює.

---

## Безперервна доставка (Continuous Delivery)

### Що це таке

**Безперервна доставка (CD)** — це підхід, при якому після успішної збірки та автоматичних тестів код **завжди** приведений у стан, готовий до розгортання в цільовому середовищі. Тобто артефакт можна в будь-який момент безпечно задеплоїти; рішення про те, *коли* саме виконати деплой на прод, часто приймає людина (натискання кнопки в CI/CD).

Для ефективного CD у пайплайн зазвичай вбудовано автоматичне розгортання в тестове/стейджинг середовище; реліз у прод може залишатися ручним кроком.

### Переваги безперервної доставки

- **Швидший вихід на ринок:** код постійно готовий до релізу, не потрібно «добивати» його перед релізом.
- **Постійний цикл зворотного зв'язку:** команда і користувачі можуть оцінювати роботу в тестовому/стейджинг середовищі і вносити правки в наступні ітерації.
- **Менше рутини:** вирішення конфліктів і підготовка до деплою автоматизовані в пайплайні, команда більше часу витрачає на розробку і тести.
- **Менший ризик при релізах:** дрібні часті зміни простіше відкотити і зрозуміти, ніж один великий реліз.

---

## CI vs CD vs Continuous Deployment

Щоб уникнути плутанини:

- **Безперервна інтеграція (CI)** — короткочасні гілки, часті злиття в спільну гілку, автоматична збірка та тести після кожного такого кроку. Фокус: стабільність коду та швидкий фідбек.
- **Безперервна доставка (CD)** — після успішного CI код завжди в стані «готовий до деплою»; реліз у прод зазвичай **ручний** (кнопка, схвалення).
- **Безперервне розгортання (Continuous Deployment)** — ще один крок далі: кожна успішна збірка після тестів **автоматично** потрапляє на прод без ручного кроку.

Усі три можуть існувати в одному процесі по черзі: спочатку CI, потім CD, і за бажанням — повністю автоматичний деплой. Основа — саме безперервна інтеграція.

---

## Continuous Testing: тести в CI/CD

Під час CI/CD код проходить **серію автоматизованих тестів**. Це називають continuous testing — тестування як частина пайплайну.

У **піраміді тестування** рівні описані знизу вгору (від швидких і дешевих до повільних і дорогих):

1. **Юніт-тести (unit tests)** — перевіряють окремі «блоки» коду (функції, класи) ізольовано. Швидкі, їх багато; вони дають швидкий фідбек при зміні коду.
2. **Інтеграційні тести (integration tests)** — перевіряють, як кілька компонентів працюють разом (наприклад, застосунок і база даних). Важливі, тому що юніт-тести самі по собі не перевіряють взаємодію частин системи.
3. **Функціональні тести (functional tests)** — перевіряють, чи функціонал відповідає очікуванням (правильні відповіді API, правильна логіка).
4. **E2E тести (end-to-end)** — імітують дії користувача в інтерфейсі (відкрити сторінку, натиснути кнопку тощо), щоб переконатися, що сценарії працюють у цілому.
5. **Навантажувальні / приймальні тести** — перевіряють поведінку під навантаженням і стабільність системи.

**Для початківців:** не обов'язково мати всі рівні одразу. Часто достатньо юніт-тестів + частини інтеграційних або e2e. Важливо, щоб у пайплайні був хоча б один автоматичний рівень тестування — це вже дає користь від CI.

**Порада:** юніт-тести швидкі і створюють основу для миттєвого фідбеку; UI/e2e тести повільніші і складніші. Баланс між рівнями піраміди залежить від проекту, але постійне автоматизоване тестування в CI/CD — ключовий компонент якості продукту.

---

## CI/CD Pipeline (конвеєр)

**CI/CD пайплайн** — це послідовність автоматичних кроків, які супроводжують код від репозиторію до збірки, тестів і (за налаштуванням) до деплою в потрібне середовище.

Типові етапи:

1. **Source** — пайплайн стартує, коли в репозиторій потрапляє новий код (коміт/пуш у певну гілку).
2. **Build** — код збирається (компіляція, встановлення залежностей тощо), формується артефакт для подальших кроків.
3. **Test** — запускаються автоматизовані тести (юніт, інтеграційні тощо). Тривалість залежить від кількості та типу тестів (від секунд до годин). Тут команда отримує зворотний зв'язок про стан коду.
4. **Deploy (тест/стейджинг)** — зібраний і перевірений код розгортається в тестове або стейджинг середовище для подальшої перевірки (ручної або автоматичної).
5. **Deploy to production** — реліз у прод для кінцевих користувачів; може бути ручним (кнопка/схвалення) або автоматичним (continuous deployment).

Побудова та підтримка CI/CD пайплайну допомагає підтримувати культуру DevOps: швидкі цикли, спільна відповідальність за якість, менший ризик при релізах.

---

## Інструменти CI/CD (короткий огляд)

- **Jenkins** — популярний open-source сервер автоматизації, часто використовується як основа для CI і CD.
- **CircleCI** — хмарний або self-hosted CI/CD з готовими інтеграціями та оркестрацією.
- **GitLab CI/CD** — вбудований у GitLab; єдине місце для коду, тестів і деплою.
- **Travis CI** — платформа CI/CD з простим налаштуванням, підтримка багатьох мов.
- **GitHub Actions** — автоматизація тестування та деплою прямо в репозиторії GitHub.

Це не повний перелік; існують і інші інструменти. Вибір залежить від хостингу коду, інфраструктури та звичок команди.

---

## Що запам'ятати

- CI — це часті невеликі злиття коду з автоматичною збіркою та тестами і швидким зворотним зв'язком.
- CD — це підтримка коду в стані «готовий до деплою»; реліз у прод часто ручний.
- Continuous Deployment — повністю автоматичний деплой після успішних тестів.
- Тести в пайплайні (continuous testing) — ключ до якості; починати можна з одного рівня (наприклад, юніт або e2e) і поступово розширювати.
- Як тестувальник ви використовуєте результати цих тестів і пайплайнів, щоб оцінювати готовність коду до релізу та швидко знаходити регресії.

---

## Приклади у цій папці

У підпапці [examples](./examples/) знаходяться:

- Приклад конфігурації **GitHub Actions** для запуску тестів при пуші в гілку — робочий YAML з кроками checkout, setup Node.js, install, test та upload артефактів.

Повний текст лекції (презентація): [prezentations/01_CICD_overview.md](../../prezentations/01_CICD_overview.md).
